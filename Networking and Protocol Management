import socket
import ssl
import os

def send_file(file_path, server_address):
    # Create a socket object
    client_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)

    try:
        # Connect to the server
        client_socket.connect(server_address)

        # Wrap the socket with SSL for secure communication
        ssl_client_socket = ssl.wrap_socket(client_socket, keyfile='client-key.pem', certfile='client-cert.pem', ssl_version=ssl.PROTOCOL_TLSv1_2)

        # Send the file
        file_name = os.path.basename(file_path)
        ssl_client_socket.sendall(file_name.encode('utf-8'))

        with open(file_path, 'rb') as file:
            data = file.read(1024)
            while data:
                ssl_client_socket.sendall(data)
                data = file.read(1024)

        print(f"File {file_name} sent successfully to {server_address}")

    except Exception as e:
        print(f"Error: {e}")

    finally:
        # Close the SSL socket
        ssl_client_socket.close()
